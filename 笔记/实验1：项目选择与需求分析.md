# ATM机项目分析

### 实验一

选题**ATM案例**，来自于华东师大MOOC课程2.2用例模型

##### 1. 主要业务需求：

- 用户有查余额、取款、存款、转账、打印单据等功能
- 管理员有硬件维护和添加现金功能
- 银行数据库需要实时进行更新

##### 2. Use Case图

<img src="C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200524182109103.png" alt="image-20200524182109103" style="zoom:70%;" /> 

##### 3. MOOC已给出的内容

- Use case图中的actor和部分用例
- 用例描述中的Pre-Cond和部分description和Exception

#### 事件流描述

##### 用例：取款

- Summary:完成一笔正常的ATM取款操作
- Actor List:用户、银行数据库
- Pre-Cond:ATM能够正常工作，用户输入正确密码登录成功

##### Description

1. 【用户】选择取款功能
2. 【系统】请求输入取款金额
3. 【用户】输入取款金额
4. 【系统】判断合理性
5. 【系统】修改银行卡余额
6. 【银行数据库】修改数据库余额
7. 【系统】保存交易记录
8. 【系统】出钞

##### Exception

4a：取款金额大于余额，需重新输入取款金额

8a：现金未正常取出，请求管理员帮助

##### PostCond

- ATM系统保留取款操作记录信息

### 实验二

#### 项目词汇表

- 银行：在对应银行具有相关的银行账户，使用ATM进行自身金钱业务操作的人员。  
- 余额查询事务：ATM用户对账户资金的余额进行查询的事务
- 取款事务：ATM用户提取相关数额的现金的操作事务
- 存款事务：ATM用户存放相对数额的现金的操作事务
- 转账事务：ATM用户在不同账户之间进行金额转移的操作事务
- 打印单据：ATM用户在ATM机上的操作进行相关信息凭条的打印
- ATM机：银行在不同地点设置一种小型机器，利用银行卡让客户可以透过机器进行提款、存款、转账等银行柜台服务 
- 银行管理员：控制ATM机的正常运作与固定维护维修，调整ATM机内存储金额的人员
- 银行：存储用户银行卡所有信息的主机
- 记录操作事务：ATM机将客户操作的过程时间信息记录存储到银行的数据库中。
- 机器维修：银行工作人员对ATM机的墨水，纸币进行维护保持足够数额。
  

### 实验三

#### 分析类图

根据分析模型法得出分析类图

<img src="C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200529105346537.png" alt="image-20200529105346537" style="zoom: 50%;" /> 

<img src="C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200529120803030.png" alt="image-20200529120803030" style="zoom:67%;" /> 

#### 文字描述

1. 类图综述

  - 该分析类图主要描述了说明了ATM机的一些基本功能，如登录操作，转账，存款，取款，打印凭条，查询余额及银行管理员对ATM机的维护和存放现金功能。
  - 其中实体类包括银行卡，交易记录，现金
  - 其中控制类包括ATM机控制类
  - 其中边界类包括登录界面、查余额界面、取款界面、存款界面、转账界面、打印单据界面、添加现金界面、机器维修界面以及银行数据库接口和打印机接口

2. 类描述

- 整体说明：储存着系统的属性信息及其相关的行为。

- 属性说明：

- 2.1类名：ATM机类（控制类）

  属性：银行卡号（string，private）；密码（string，private）

  操作名：登录操作说明：客户选择登录操作，插入银行卡并输入密码的作用

  操作名：查余额操作说明：客户选择查询操作，查询银行卡的余额操作的作用

  操作名：取款操作说明：客户选择取款操作并输入取款金额取出现金操作的作用

  操作名：存款操作说明：客户选择存款操作存入现金操作的作用

  操作名：转账操作说明：客户选择转账操作，输入转账卡号并输入转账金额操作的作用

  操作名：打印凭条操作说明：客户选择打印单据操作，客户将银行卡交易信息打印出来操作的作用

  操作名：添加现金操作说明：管理员选择添加现金操作，添加ATM机中的纸币操作的作用

  操作名：机器维修操作说明：管理员选择机器维修操作，对ATM机的硬件进行维护作用

  关系说明：与所有的其他类都相关联

- 2.2类名：银行卡类（实体类）

  属性：银行卡号（string，private）；密码（string，private）；账号余额（int，private）

  操作名：修改银行卡基本信息（） 说明：对银行卡号和密码进行修改

  操作名：修改余额（） 说明：对账号余额属性进行修改

  操作名：获取余额（） 说明：获取账号余额

  关系说明：与ATM机控制类相关联

- 2.3类名：交易记录类（实体类）

  属性：记录信息（string，private）

  操作名：获取交易记录（） 说明：获取记录信息

  操作名：修改交易记录（） 说明：对记录信息进行修改

  关系说明：与ATM机控制类相关联

- 2.4类名：现金类（实体类）

  属性：现金数（int，private）

  操作名：获取剩余现金数（） 说明：获取剩余现金数

  操作名：修改剩余现金数（） 说明：对现金数属性进行修改

  关系说明：与ATM机控制类相关联

- 2.5类名：银行数据库接口

  说明：保存所有银行卡信息的数据库,提供接口对数据库中的银行卡进行增删查改

  操作名：获取银行卡信息（） 说明：获取数据库中的银行卡信息

  操作名：修改银行卡信息（） 说明：修改数据库中的银行卡信息

  关系说明：与ATM机控制类相关联

- 2.6类名：打印机接口

  说明：外部设备，提供可以打印单据的接口
  
  操作名：打印交易记录（） 说明：打印交易记录形成单据
  
  关系说明：与ATM机控制类相关联
  
- 2.7类名：登录界面

  属性：界面，按钮，文本框

  实现要求：实现用户登录使用ATM机的接口

  关系说明：与ATM机控制类相关联

- 2.8类名：查余额界面

  属性：界面，按钮，文本框

  实现要求：用户在完成登录操作后，才能进入到余额查询界面，通过用户对界面的操作，提供用户查询账户余额的接口

  关系说明：与ATM机控制类相关联

- 2.9类名：取款界面

  属性：界面，按钮，文本框

  实现要求：用户在完成登录操作后，才能进入到取款界面，通过用户对界面的操作，提供用户取款的接口

  关系说明：与ATM机控制类相关联

- 2.10类名：存款界面

  属性：界面，按钮，文本框

  实现要求：用户在完成存款操作后，才能进入到取款界面，通过用户对界面的操作，提供用户存款的接口

  关系说明：与ATM机控制类相关联

- 2.11类名：转账界面

  属性：界面，按钮，文本框

  实现要求：用户在完成转账操作后，才能进入到取款界面，通过用户对界面的操作，提供用户转账的接口

  关系说明：与ATM机控制类相关联

- 2.12类名：打印单据界面

  属性：界面，按钮，文本框

  实现要求：用户在完成登录操作后，才能进入到打印单据界面，通过用户对界面的操作，提供用户打印单据的接口

  关系说明：与ATM机控制类相关联

- 2.12类名：添加现金界面

  属性：界面，按钮，文本框

  实现要求：管理员在完成登录操作后，才能进入到添加现金界面，通过用户对界面的操作，提供管理员添加现金的接口

  关系说明：与ATM机控制类相关联

- 2.12类名：机器维修界面

  属性：界面，按钮，文本框

  实现要求：管理员在完成登录操作后，才能进入到机器维修界面，通过用户对界面的操作，提供管理员机器维修的接口

  关系说明：与ATM机控制类相关联
### 实验四

#### 顺序图

- 用户取款操作的顺序图

<img src="C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200524180742311.png" alt="image-20200524180742311" style="zoom:67%;" /> 

### 实验五

#### 取款操作的系统顺序图

<img src="C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200508200216011.png" alt="image-20200508200216011" style="zoom:70%;" /> 

- 选择取款功能后置条件：ATM控制实例化银行卡、现金对象，两者建立联系，银行卡实例化交易记录

- 输入取款金额后置条件：修改银行卡属性余额，修改交易记录属性记录信息，修改现金属性。

- 出钞后置条件：析构银行卡、交易记录、现金对象

#### 取款操作的系统操作每一个顺序图

![image-20200524181432744](C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200524181432744.png)

#### GRASP原则的应用说明

![image-20200524182501990](C:\Users\62659\AppData\Roaming\Typora\typora-user-images\image-20200524182501990.png)

创建者原则：ATM机控制对象创建银行卡对象，银行卡对象创建交易记录对象，体现出创建者原则

信息专家：银行卡，交易记录，现金类，各自封装自身的信息，支持低耦合；系统行为分布到不同类，支持高内聚

低耦合原则：银行卡，交易记录，现金类，类的设计之间相对独立，互相影响比较小，体现低耦合原则

高内聚原则：银行卡，交易记录，现金类，只需完成自己职责内的工作，体现高内聚原则

控制器：ATM控制类，易于接受由界面UI类发送来的请求，有利于保证应用的系统操作顺序



可以提升采用的原则：单实例模式：只实例化一个ATM控制对象



